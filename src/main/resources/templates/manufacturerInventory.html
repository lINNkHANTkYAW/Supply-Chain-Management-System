<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.css">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
	rel="stylesheet">
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet" href="/css/supplierdashboard.css"
	th:href="@{/css/supplierdashboard.css}">
<link rel="stylesheet" href="/css/forall.css"
	th:href="@{/css/forall.css}">
<title>Manufacturer Inventory</title>
</head>
<body>
	<header class="header" id="header">
	       <div class="header__container">
	           <div class="header__logo d-flex align-items-center">
	           
	               
	          
	           </div>
	           <button class="header__toggle" id="header-toggle">
	               <i class="ri-menu-line"></i>
	           </button>
	       </div>
	   </header>

	   <nav class="sidebar" id="sidebar">
	       <div class="sidebar__container">
	           <div class="sidebar__user">
	               <div class="sidebar__img" style="display: flex; justify-content: center; align-items: center; border-radius: 50%; overflow: hidden; background-color: #e0e0e0; ">
	                   <img id="mainProfileImage" style="background-size:cover; width:50px; height:50px;"  th:src="${user?.profileImg != null} ? @{/img/{img}(img=${user.profileImg})} : @{/img/default-profile.jpg}" alt="Profile Image">
	               </div>
	               <div class="sidebar__info">
	                   <h3 th:text="${manufacturer.user.username != null ? manufacturer.user.username : 'Unknown User'}"></h3>
	                   <span th:text="${manufacturer.user.email != null ? manufacturer.user.email : 'Unknown Email'}"></span>
	               </div>
	           </div>
	           <div class="sidebar__content">
	               <div>
	                   <h3 class="sidebar__title">MANAGE</h3>
	                   <div class="sidebar__list">
	                       <a th:href="@{/manufacturer-dashboard}" class="sidebar__link ">
	                           <i class="ri-pie-chart-2-fill"></i> <span>Dashboard</span>
	                       </a>
	                       <a th:href="@{/manu-product-management}" class="sidebar__link">
	                           <i class="bi bi-inboxes-fill"></i> <span>Manage Product</span>
	                       </a>
	                       <a th:href="@{/manufacturerInventory}" class="sidebar__link active-link">
	                           <i class="bi bi-boxes"></i> <span>Manage Inventory</span>
	                       </a>
						<a th:href="@{/suppliermarketplace}" class="sidebar__link">
							<i class="bi bi-shop"></i>
							<span>Supplier MarketPlace</span>
						</a>
	                       
						<a th:href="@{/manuordernoti}" class="sidebar__link">
						    <i class="bi bi-journal-check"></i> <span>Order History With Distributor</span>
						</a>
						<a th:href="@{/manufacturerorderhistory}" class="sidebar__link">
						    <i class="bi bi-journal-check"></i> <span>Order History With Manufacturer</span>
						</a>
						
	                   
	                   </div>
	               </div>
	               <div>
	                   <h3 class="sidebar__title">SETTINGS</h3>
	                   <div class="sidebar__list">
	                       <a th:href="@{/manuprofile}" class="sidebar__link">
	                           <i class="ri-settings-3-fill"></i> <span>Profile Settings</span>
	                       </a>
	                      
	                   </div>
	               </div>
	           </div>
	           <div class="sidebar__actions">
	               <button>
	                   <i class="ri-moon-clear-fill sidebar__link sidebar__theme" id="theme-button">
	                       <span>Theme</span>
	                   </i>
	               </button>
	               <button class="sidebar__link" type="submit" id="logoutBtn">
	                   <i class="ri-logout-box-r-fill"></i> Log Out
	               </button>
	           </div>
	       </div>
	   </nav>

	<main class="main container-fluid" id="main"
		th:data-manufacturer-id="${manufacturerId}">
		<div id="chat-placeholder"></div>
				<div th:replace="~{manuChat :: chatFragment}"></div>
		<h2 class="text-center">Manufacturer Raw Materials</h2>
		<table class="table table-bordered table-striped" >
			<thead class="table-dark">
				<tr>
					<th>Name</th>
					<th>Category</th>
					<th>Stock Quantity</th>
					<th>Unit Cost</th>
					<th>Total Cost</th>
					<th>Added Date</th>
				</tr>
			</thead>
			<tbody  id="completedOrdersBody"></tbody>
		</table>

		<div style="margin-top:20%;">
			<button class="btn btn-primary" data-bs-toggle="modal"
				data-bs-target="#addItemModal">Add New Item</button>
		</div>

		<h2 class="text-center mt-5">Manufacturer Raw Materials</h2>
		<table class="table table-bordered table-striped">
			<thead class="table-dark">
				<tr>
					<th>Name</th>
					<th>Category</th>
					<th>Quantity on Hand</th>
					<th>Cost</th>
					<th>Unit Cost</th>
					<th>Added Date</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody id="manufacturerInventoryBody"></tbody>
		</table>

		<div class="modal fade" id="addItemModal" tabindex="-1"
			aria-labelledby="addItemModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="addItemModalLabel">Add New Raw
							Material</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<form id="addItemForm">
							<div class="mb-3">
								<label class="form-label">Name:</label> <input type="text"
									id="newItemName" class="form-control" required>
							</div>
							<div class="mb-3">
								<label class="form-label">Category:</label> <select
									class="form-control" id="category" name="category" required>
									<option th:each="category : ${categories}"
										th:value="${category.categoryId}"
										th:text="${category.categoryName}"></option>
								</select>
							</div>
							<div class="mb-3">
								<label class="form-label">Quantity:</label> <input type="number"
									id="newItemQuantity" class="form-control" min="1" required>
							</div>
							<div class="mb-3">
								<label class="form-label">Unit Cost:</label> <input
									type="number" id="newItemUnitCost" class="form-control"
									step="0.01" required>
							</div>
							<div class="mb-3">
								<label class="form-label">Cost:</label> <input
									type="number" id="newItemCost" class="form-control" step="0.01"
									required>
							</div>
							<div class="mb-3">
								<label class="form-label">Added Date:</label> <input type="date"
									id="addedDate" class="form-control" required>
							</div>
						</form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-primary" form="addItemForm">Add
							Item</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="editOrderModal" tabindex="-1"
			aria-labelledby="editOrderModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="editOrderModalLabel">Edit Order</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<input type="hidden" id="editRawId">
						<div class="mb-3">
							<label class="form-label">Order ID:</label> <input type="text"
								id="editOrderId" class="form-control" readonly>
						</div>
						<div class="mb-3">
							<label class="form-label">Quantity:</label> <input type="number"
								id="editOrderQuantity" class="form-control" min="1">
						</div>
						<div class="mb-3">
							<label class="form-label">Cost:</label> <input type="number"
								id="editOrderCost" class="form-control" step="0.01">
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary" id="saveRawEdit">Save
							Changes</button>
					</div>
				</div>
			</div>
		</div>

		<div class="modal fade" id="editRawModal" tabindex="-1"
			aria-labelledby="editRawModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="editRawModalLabel">Edit Raw
							Material</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal"
							aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<input type="hidden" id="editRawCategoryId">
						<div class="mb-3">
							<label class="form-label">Name:</label> <input type="text"
								id="editRawName" class="form-control" readonly>
						</div>
						<div class="mb-3">
							<label class="form-label">Category:</label>  
							<input type="text" id="editRawCategory" class="form-control" readonly>
						</div>
						<div class="mb-3">
							<label class="form-label">Quantity:</label> <input type="number"
								id="editRawQuantity" class="form-control" min="1">
						</div>
						<div class="mb-3">
							<label class="form-label">Cost:</label> <input type="number"
								id="editRawCost" class="form-control" step="0.01">
						</div>
						<div class="mb-3">
							<label class="form-label">Unit Cost:</label> <input type="number"
								id="editRawUnitCost" class="form-control" step="0.01">
						</div>

						<div class="mb-3">
							<label class="form-label">Added Date:</label> <input type="text"
								id="editRawAddedDate" class="form-control" readonly>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-bs-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-primary"
							onclick="saveRawEdit()">Save Changes</button>
					</div>
				</div>
			</div>
		</div>
	</main>

	<script th:src="@{/js/forall.js}"></script>
	<script th:src="@{/js/manuinven.js}"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.7/dist/umd/popper.min.js"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
	
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>